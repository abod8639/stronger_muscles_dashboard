# ๐ง ุฅุตูุงุญ ูุดููุฉ ุนุฏู ุชูุงูู ุงููููุฐ (Port Mismatch)

## ๐ด ุงููุดููุฉ

ุงูุฎุงุฏู ูุฑุณู ุฑูุงุจุท ุจูููุฐ **8000** ููู ุงูุชุทุจูู ูููู ููุงุชุตุงู ุจูููุฐ **8080**:

```
ุงูุชุทุจูู ูุณุชุฎุฏู:  http://localhost:8080/api/v1
ุงูุฎุงุฏู ูุฑุณู:     http://localhost:8000/storage/products/uuid.jpg
```

## โ ูุจู ุงูุฅุตูุงุญ
```json
{
  "imageUrls": [
    "http://localhost:8000/storage/products/65bbe416-2d9f-4fee-b69c-94e38e206fb6.jpg"
  ]
}
```
**ุงููุชูุฌุฉ:** ุงูุฑุงุจุท ูุง ูุนูู ูุฃู ุงููููุฐ ุฎุงุทุฆ! โ

---

## โ ุจุนุฏ ุงูุฅุตูุงุญ

ุชู ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฐููุฉ ูุชุตุญูุญ ุงููููุฐ ุชููุงุฆูุงู:

```dart
// ุฅุตูุงุญ ุงููููุฐ ุฅุฐุง ูุงู ููุงู ุนุฏู ุชูุงูู
if (imageUrl.contains('localhost:8000')) {
  imageUrl = imageUrl.replaceAll('localhost:8000', 'localhost:8080');
  print('๐ง ุชู ุชุตุญูุญ ุงููููุฐ ูู :8000 ุฅูู :8080');
}
```

### ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:
```
ุงูุฑุฏ ูู ุงูุฎุงุฏู: http://localhost:8000/storage/products/uuid.jpg
โ
ุงููุนุงูุฌุฉ: ุงุณุชุจุฏู 8000 ุจู 8080
โ
ุงูุฑุงุจุท ุงูููุงุฆู: http://localhost:8080/storage/products/uuid.jpg โ
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### `lib/services/api_service.dart`

ุชู ุชุญุณูู **3 ุฏูุงู**:

1. โ `uploadProductImage()` - ุฑูุน ุตูุฑุฉ ุงูููุชุฌ
2. โ `uploadCategoryImage()` - ุฑูุน ุตูุฑุฉ ุงูุชุตููู  
3. โ `uploadImage()` - ุฑูุน ุตูุฑุฉ ุนุงูุฉ

ูู ุฏุงูุฉ ุงูุขู ุชููู ุจู:
1. ุงุณุชุฎุฑุงุฌ ุงูุฑุงุจุท ูู ุงูุงุณุชุฌุงุจุฉ
2. ุงูุชุญูู ูู ุฃูู ูุจุฏุฃ ุจู `http://`
3. **ุฅุตูุงุญ ุงููููุฐ ูู :8000 ุฅูู :8080** (ุฌุฏูุฏ)
4. ุทุจุงุนุฉ ุงูุฑุงุจุท ุงูููุงุฆู ููุชุตุญูุญ

---

## ๐ ุฑุณุงุฆู ุงูุชุตุญูุญ ูู Console

ุนูุฏ ุชุดุบูู ุงูุชุทุจูู ูุงุฎุชูุงุฑ ุตูุฑุฉุ ุณุชุธูุฑ ุฑุณุงุฆู ุชูุถูุญูุฉ:

```
๐ฅ ุฑุฏ ุงูุฎุงุฏู (uploadProductImage): {"data": {"url": "http://localhost:8000/storage/products/65bbe416-2d9f-4fee-b69c-94e38e206fb6.jpg"}}
๐ง ุชู ุชุตุญูุญ ุงููููุฐ ูู :8000 ุฅูู :8080
โ ุฑุงุจุท ุงูุตูุฑุฉ ุงูููุงุฆู: http://localhost:8080/storage/products/65bbe416-2d9f-4fee-b69c-94e38e206fb6.jpg
```

---

## ๐ฏ ุงูุญู ุงููุซุงูู (ูุฌุจ ุชุทุจููู ุนูู ุงูุฎุงุฏู)

```php
// ูู Laravel Backend - ุชุตุญูุญ ุงูุฎุงุฏู ููุฑุณู ุงููููุฐ ุงูุตุญูุญ
public function uploadProductImage(Request $request)
{
    $file = $request->file('image');
    $path = $file->store('products', 'public');
    
    return response()->json([
        'status' => 'success',
        'data' => [
            // โ ุงุณุชุฎุฏู env ููุญุตูู ุนูู ุงูู URL ุงูุตุญูุญ
            'url' => asset('storage/' . $path),  
            'path' => $path,
            'name' => $file->getClientOriginalName(),
        ]
    ], 201);
}

// ุฃู ูู .env:
APP_URL=http://localhost:8080
```

---

## ๐ ุงูุชุญูู ูู ุงูุญู

### ุฎุทูุฉ 1: ูุญุต ุฑุฏ ุงูุฎุงุฏู
```bash
curl -X POST http://localhost:8080/api/v1/upload/product-image \
  -F "image=@test.jpg"
```

ูุฌุจ ุฃู ุชููู ุงูุงุณุชุฌุงุจุฉ:
```json
{
  "status": "success",
  "data": {
    "url": "http://localhost:8000/storage/products/uuid.jpg",
    "path": "products/uuid.jpg",
    "name": "test.jpg"
  }
}
```

### ุฎุทูุฉ 2: ุงุฎุชุจุฑ ูู ุงูุชุทุจูู
1. ุดุบูู ุงูุชุทุจูู
2. ุงุฎุชุฑ ุตูุฑุฉ ูู ุงููุนุฑุถ
3. ุงูุญุต ุฑุณุงุฆู console
4. ุชุญูู ูู ุฃู ุงูุฑุงุจุท ูุญุชูู ุนูู `:8080`

### ุฎุทูุฉ 3: ุงุฎุชุจุฑ ุงูุฑุงุจุท
```bash
# ุชุฃูุฏ ูู ุฃู ุงูุฑุงุจุท ุงููุตุญุญ ูุนูู
curl http://localhost:8080/storage/products/65bbe416-2d9f-4fee-b69c-94e38e206fb6.jpg
```

---

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ

| ุงูุนูุตุฑ | ูุจู | ุจุนุฏ |
|-------|------|------|
| ุฑุงุจุท ุงูุฎุงุฏู | `:8000` | `:8000` โ `:8080` (ูุตุญุญ) |
| ูุนุงูุฌุฉ ุฎุทุฃ | ูุง ุชูุฌุฏ | ูุนุงูุฌุฉ ุชููุงุฆูุฉ โ |
| ุฑุณุงูุฉ ุงูุชุตุญูุญ | ูุง ุชูุฌุฏ | ุทุจุงุนุฉ ุชูุถูุญูุฉ ๐ง |
| ุงูุฑุงุจุท ุงูููุงุฆู | ุฎุงุทุฆ โ | ุตุญูุญ โ |

---

## ๐ก ููุงุญุธุงุช ูููุฉ

1. **ูุฐุง ุญู ููุชู:** ุงูุญู ุงูุฃูุซู ูู ุชุตุญูุญ ุงูุฎุงุฏู ููุฑุณู ุงููููุฐ ุงูุตุญูุญ ูู ุงูุจุฏุงูุฉ

2. **ูุงุจู ููุชูุณุน:** ุฅุฐุง ุงุญุชุฌุช ููุนุงูุฌุฉ ุญุงูุงุช ุฃุฎุฑู ูุดุงุจูุฉุ ูููู ุฅุถุงูุฉ ูุนุงูุฌุงุช ุฅุถุงููุฉ

3. **ุงูุณุฌูุงุช ูููุฏุฉ:** ุงูุทุจุงุนุฉ ูู console ุชุณุงุนุฏ ูู ุชุชุจุน ุงููุดููุงุช

4. **ุงูุงุฎุชุจุงุฑ ุงููุนูู:** ุชุฃูุฏ ูู ุงุฎุชุจุงุฑ ูุน ุฌูุงุฒ ุญูููู ุฃู ูุญุงูู ูุนูู

---

## โจ ุงูุญุงูุฉ ุงูุญุงููุฉ

**โ ุงููุธุงู ุงูุขู ูุนุงูุฌ ุนุฏู ุชูุงูู ุงููููุฐ ุชููุงุฆูุงู**

- ุฌููุน ุฑูุงุจุท ุงูุตูุฑ ูุชู ุชุตุญูุญูุง ุชููุงุฆูุงู
- ุฑุณุงุฆู ูุงุถุญุฉ ูู console ููุชุตุญูุญ  
- ุงูููุฏ ุจุฏูู ุฃุฎุทุงุก (โ flutter analyze)
- ุฌุงูุฒ ููุงุณุชุฎุฏุงู

---

**ุชู ุงูุชุญุฏูุซ:** January 5, 2026  
**ุงูุญุงูุฉ:** โ ูุตุญุญ ูุฌุงูุฒ
